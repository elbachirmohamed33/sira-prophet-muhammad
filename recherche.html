<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Recherche - Explorez la vie du Prophète Muhammad ﷺ</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&family=Amiri:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-gold: #D4AF37;
            --deep-green: #0F4C3A;
            --soft-cream: #F8F6F0;
            --warm-brown: #8B4513;
            --text-dark: #2C1810;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, var(--soft-cream) 0%, #E8E2D4 100%);
            color: var(--text-dark);
            line-height: 1.6;
            min-height: 100vh;
        }

        .navigation {
            background: rgba(255,255,255,0.95);
            backdrop-filter: blur(10px);
            padding: 1rem 0;
            position: fixed;
            top: 0;
            width: 100%;
            z-index: 1000;
            border-bottom: 1px solid rgba(212,175,55,0.2);
        }

        .nav-container {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 2rem;
        }

        .nav-logo {
            font-family: 'Amiri', serif;
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--deep-green);
        }

        .nav-links {
            display: flex;
            gap: 2rem;
            list-style: none;
        }

        .nav-links a {
            color: var(--text-dark);
            text-decoration: none;
            font-weight: 500;
            transition: color 0.3s ease;
        }

        .nav-links a:hover {
            color: var(--primary-gold);
        }

        .search-header {
            background: linear-gradient(rgba(15, 76, 58, 0.9), rgba(139, 69, 19, 0.8));
            color: white;
            text-align: center;
            padding: 120px 0 80px;
            margin-top: 80px;
        }

        .search-title {
            font-family: 'Amiri', serif;
            font-size: 3rem;
            font-weight: 700;
            margin-bottom: 1rem;
        }

        .search-subtitle {
            font-size: 1.2rem;
            opacity: 0.9;
        }

        .search-container {
            max-width: 1200px;
            margin: -40px auto 2rem;
            padding: 0 2rem;
        }

        .search-box {
            background: white;
            padding: 2rem;
            border-radius: 20px;
            box-shadow: 0 15px 40px rgba(0,0,0,0.1);
            margin-bottom: 2rem;
        }

        .search-input-container {
            position: relative;
            margin-bottom: 1.5rem;
        }

        .search-input {
            width: 100%;
            padding: 1.5rem 3rem 1.5rem 1.5rem;
            border: 2px solid #E0E0E0;
            border-radius: 15px;
            font-size: 1.1rem;
            transition: all 0.3s ease;
            background: #FAFAFA;
        }

        .search-input:focus {
            outline: none;
            border-color: var(--primary-gold);
            background: white;
            box-shadow: 0 0 0 3px rgba(212, 175, 55, 0.1);
        }

        .search-button {
            position: absolute;
            right: 1rem;
            top: 50%;
            transform: translateY(-50%);
            background: var(--primary-gold);
            color: white;
            border: none;
            padding: 0.8rem 1.5rem;
            border-radius: 10px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .search-button:hover {
            background: var(--warm-brown);
        }

        .filters-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-bottom: 1.5rem;
        }

        .filter-group {
            background: #F8F8F8;
            padding: 1rem;
            border-radius: 10px;
        }

        .filter-label {
            font-weight: 600;
            color: var(--deep-green);
            margin-bottom: 0.5rem;
            display: block;
        }

        .filter-select {
            width: 100%;
            padding: 0.8rem;
            border: 1px solid #E0E0E0;
            border-radius: 8px;
            background: white;
            font-size: 0.95rem;
        }

        .advanced-filters {
            display: none;
            background: #F0F0F0;
            padding: 1.5rem;
            border-radius: 10px;
            margin-top: 1rem;
        }

        .advanced-toggle {
            background: none;
            border: none;
            color: var(--primary-gold);
            font-weight: 600;
            cursor: pointer;
            text-decoration: underline;
            margin-bottom: 1rem;
        }

        .results-container {
            background: white;
            border-radius: 20px;
            padding: 2rem;
            box-shadow: 0 8px 25px rgba(0,0,0,0.08);
            margin-bottom: 2rem;
        }

        .results-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
            padding-bottom: 1rem;
            border-bottom: 2px solid #F0F0F0;
        }

        .results-count {
            font-weight: 600;
            color: var(--deep-green);
        }

        .sort-select {
            padding: 0.8rem 1rem;
            border: 1px solid #E0E0E0;
            border-radius: 8px;
            background: white;
        }

        .result-item {
            background: linear-gradient(135deg, var(--soft-cream), #F0EDE6);
            padding: 2rem;
            border-radius: 15px;
            margin-bottom: 1.5rem;
            border-left: 5px solid var(--primary-gold);
            transition: all 0.3s ease;
        }

        .result-item:hover {
            transform: translateX(5px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
        }

        .result-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 1rem;
        }

        .result-title {
            font-family: 'Amiri', serif;
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--deep-green);
            margin-bottom: 0.5rem;
        }

        .result-category {
            background: var(--primary-gold);
            color: white;
            padding: 0.3rem 0.8rem;
            border-radius: 15px;
            font-size: 0.8rem;
            font-weight: 600;
        }

        .result-period {
            color: var(--warm-brown);
            font-weight: 600;
            margin-bottom: 1rem;
        }

        .result-excerpt {
            color: var(--text-dark);
            line-height: 1.7;
            margin-bottom: 1rem;
        }

        .result-highlight {
            background: rgba(212, 175, 55, 0.3);
            padding: 0.2rem 0.4rem;
            border-radius: 4px;
            font-weight: 600;
        }

        .result-link {
            display: inline-flex;
            align-items: center;
            color: var(--deep-green);
            text-decoration: none;
            font-weight: 600;
            transition: color 0.3s ease;
        }

        .result-link:hover {
            color: var(--primary-gold);
        }

        .no-results {
            text-align: center;
            padding: 3rem;
            color: var(--warm-brown);
        }

        .no-results-icon {
            font-size: 4rem;
            margin-bottom: 1rem;
        }

        .suggestions {
            background: #FFF9E6;
            padding: 1.5rem;
            border-radius: 10px;
            border-left: 4px solid var(--primary-gold);
            margin-top: 2rem;
        }

        .suggestions-title {
            font-weight: 600;
            color: var(--deep-green);
            margin-bottom: 1rem;
        }

        .suggestion-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
        }

        .suggestion-tag {
            background: var(--primary-gold);
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .suggestion-tag:hover {
            background: var(--warm-brown);
            transform: scale(1.05);
        }

        @media (max-width: 768px) {
            .search-title {
                font-size: 2rem;
            }
            
            .filters-container {
                grid-template-columns: 1fr;
            }
            
            .results-header {
                flex-direction: column;
                gap: 1rem;
                align-items: stretch;
            }
            
            .result-header {
                flex-direction: column;
                gap: 0.5rem;
            }
            
            .nav-links {
                display: none;
            }
        }
    </style>
</head>
<body>
    <nav class="navigation">
        <div class="nav-container">
            <div class="nav-logo">Recherche ﷺ</div>
            <ul class="nav-links">
                <li><a href="index_v2.html">Accueil</a></li>
                <li><a href="fr/index_v2.html">Périodes</a></li>
                <li><a href="carte_interactive.html">Carte</a></li>
                <li><a href="quiz.html">Quiz</a></li>
                <li><a href="galerie.html">Galerie</a></li>
            </ul>
        </div>
    </nav>

    <header class="search-header">
        <h1 class="search-title">Recherche Avancée</h1>
        <p class="search-subtitle">Explorez en profondeur la vie du Prophète Muhammad ﷺ</p>
    </header>

    <div class="search-container">
        <div class="search-box">
            <div class="search-input-container">
                <input type="text" class="search-input" id="searchInput" placeholder="Recherchez un événement, une personne, un lieu, un concept..." autocomplete="off">
                <button class="search-button" onclick="performSearch()">🔍 Rechercher</button>
            </div>

            <div class="filters-container">
                <div class="filter-group">
                    <label class="filter-label">Période</label>
                    <select class="filter-select" id="periodFilter">
                        <option value="">Toutes les périodes</option>
                        <option value="mecque">Période Mecquoise (570-622)</option>
                        <option value="medine">Période Médinoise (622-632)</option>
                        <option value="jeunesse">Jeunesse (570-610)</option>
                        <option value="revelation">Début Révélation (610-622)</option>
                        <option value="conquetes">Conquêtes (622-632)</option>
                    </select>
                </div>

                <div class="filter-group">
                    <label class="filter-label">Catégorie</label>
                    <select class="filter-select" id="categoryFilter">
                        <option value="">Toutes catégories</option>
                        <option value="biographie">Biographie</option>
                        <option value="batailles">Batailles</option>
                        <option value="revelations">Révélations</option>
                        <option value="compagnons">Compagnons</option>
                        <option value="miracles">Miracles</option>
                        <option value="enseignements">Enseignements</option>
                    </select>
                </div>

                <div class="filter-group">
                    <label class="filter-label">Type de contenu</label>
                    <select class="filter-select" id="typeFilter">
                        <option value="">Tous types</option>
                        <option value="evenement">Événements</option>
                        <option value="personne">Personnages</option>
                        <option value="lieu">Lieux</option>
                        <option value="concept">Concepts</option>
                    </select>
                </div>

                <div class="filter-group">
                    <label class="filter-label">Source</label>
                    <select class="filter-select" id="sourceFilter">
                        <option value="">Toutes sources</option>
                        <option value="bukhari">Sahih al-Bukhari</option>
                        <option value="muslim">Sahih Muslim</option>
                        <option value="ibn-hisham">Ibn Hisham</option>
                        <option value="tabari">At-Tabari</option>
                    </select>
                </div>
            </div>

            <button class="advanced-toggle" onclick="toggleAdvancedFilters()">▼ Filtres avancés</button>
            
            <div class="advanced-filters" id="advancedFilters">
                <div class="filters-container">
                    <div class="filter-group">
                        <label class="filter-label">Âge du Prophète ﷺ</label>
                        <select class="filter-select" id="ageFilter">
                            <option value="">Tous âges</option>
                            <option value="0-10">Enfance (0-10 ans)</option>
                            <option value="10-25">Adolescence/Jeunesse (10-25 ans)</option>
                            <option value="25-40">Adulte pré-prophète (25-40 ans)</option>
                            <option value="40-53">Période mecquoise (40-53 ans)</option>
                            <option value="53-63">Période médinoise (53-63 ans)</option>
                        </select>
                    </div>

                    <div class="filter-group">
                        <label class="filter-label">Importance historique</label>
                        <select class="filter-select" id="importanceFilter">
                            <option value="">Toute importance</option>
                            <option value="majeure">Majeure</option>
                            <option value="significative">Significative</option>
                            <option value="contextuelle">Contextuelle</option>
                        </select>
                    </div>
                </div>
            </div>
        </div>

        <div class="results-container" id="resultsContainer" style="display: none;">
            <div class="results-header">
                <div class="results-count" id="resultsCount">0 résultat trouvé</div>
                <select class="sort-select" id="sortSelect" onchange="sortResults()">
                    <option value="relevance">Pertinence</option>
                    <option value="chronological">Chronologique</option>
                    <option value="alphabetical">Alphabétique</option>
                </select>
            </div>
            <div id="resultsContent">
                <!-- Les résultats seront affichés ici -->
            </div>
        </div>

        <div class="suggestions">
            <div class="suggestions-title">Suggestions de recherche :</div>
            <div class="suggestion-tags">
                <span class="suggestion-tag" onclick="searchSuggestion('Hégire')">Hégire</span>
                <span class="suggestion-tag" onclick="searchSuggestion('Bataille de Badr')">Bataille de Badr</span>
                <span class="suggestion-tag" onclick="searchSuggestion('Khadija')">Khadija</span>
                <span class="suggestion-tag" onclick="searchSuggestion('Révélation')">Révélation</span>
                <span class="suggestion-tag" onclick="searchSuggestion('Aisha')">Aisha</span>
                <span class="suggestion-tag" onclick="searchSuggestion('Mecque')">Mecque</span>
                <span class="suggestion-tag" onclick="searchSuggestion('Médine')">Médine</span>
                <span class="suggestion-tag" onclick="searchSuggestion('Compagnons')">Compagnons</span>
                <span class="suggestion-tag" onclick="searchSuggestion('Isra Mi\'raj')">Isra Mi'raj</span>
                <span class="suggestion-tag" onclick="searchSuggestion('Hudaybiya')">Hudaybiya</span>
            </div>
        </div>
    </div>

    <script>
        // Base de données de recherche simulée
        const searchDatabase = [
            {
                id: 1,
                title: "La Naissance du Prophète Muhammad ﷺ",
                category: "biographie",
                period: "mecque",
                type: "evenement",
                source: "ibn-hisham",
                age: "0-10",
                importance: "majeure",
                excerpt: "Le Prophète Muhammad ﷺ est né à La Mecque en 570 EC, dans l'année appelée 'Am al-Fil' (l'Année de l'Éléphant). Sa naissance fut marquée par des signes extraordinaires et des prodiges qui annonçaient sa future mission prophétique.",
                content: "naissance prophète muhammad mecque année éléphant 570 abdullah amina prodiges signes",
                link: "fr/periode1_v2.html"
            },
            {
                id: 2,
                title: "La Première Révélation dans la Grotte de Hira",
                category: "revelations",
                period: "mecque",
                type: "evenement",
                source: "bukhari",
                age: "40-53",
                importance: "majeure",
                excerpt: "À l'âge de 40 ans, le Prophète ﷺ reçut sa première révélation de l'ange Gabriel dans la grotte de Hira. Les premières paroles révélées furent 'Iqra bismi rabbika alladhi khalaq' - Lis au nom de ton Seigneur qui a créé.",
                content: "première révélation hira gabriel jibril iqra coran 40 ans grotte",
                link: "fr/periode2_v2.html"
            },
            {
                id: 3,
                title: "Khadija bint Khuwaylid - La Première Épouse",
                category: "compagnons",
                period: "mecque",
                type: "personne",
                source: "ibn-hisham",
                age: "25-40",
                importance: "majeure",
                excerpt: "Khadija bint Khuwaylid fut la première épouse du Prophète ﷺ et la première personne à croire en sa mission. Riche commerçante de La Mecque, elle soutint le Prophète moralement et financièrement.",
                content: "khadija épouse première croyante commerçante mecque soutien moral financier",
                link: "fr/periode1_v2.html"
            },
            {
                id: 4,
                title: "L'Hégire - Migration vers Médine",
                category: "biographie",
                period: "medine",
                type: "evenement",
                source: "bukhari",
                age: "53-63",
                importance: "majeure",
                excerpt: "En 622 EC, le Prophète ﷺ migra de La Mecque vers Médine avec Abu Bakr. Cette migration, appelée Hégire, marque le début du calendrier islamique et l'établissement de la première communauté musulmane.",
                content: "hégire migration médine yathrib abu bakr 622 calendrier islamique hijra",
                link: "fr/periode8_v2.html"
            },
            {
                id: 5,
                title: "La Bataille de Badr - Première Grande Victoire",
                category: "batailles",
                period: "medine",
                type: "evenement",
                source: "muslim",
                age: "53-63",
                importance: "majeure",
                excerpt: "La bataille de Badr (624 EC) fut la première grande victoire militaire des musulmans. Malgré leur infériorité numérique (313 contre 1000), les musulmans furent victorieux grâce à l'aide divine.",
                content: "bataille badr victoire 313 1000 aide divine 624 première militaire",
                link: "fr/periode10_v2.html"
            },
            {
                id: 6,
                title: "Aisha bint Abu Bakr - L'Épouse Savante",
                category: "compagnons",
                period: "medine",
                type: "personne",
                source: "bukhari",
                age: "53-63",
                importance: "significative",
                excerpt: "Aisha bint Abu Bakr, épouse du Prophète ﷺ, était reconnue pour son intelligence et sa mémoire exceptionnelle. Elle transmit de nombreux hadiths et fut une source majeure d'enseignements islamiques.",
                content: "aisha abu bakr épouse savante intelligence hadiths enseignements",
                link: "fr/periode9_v2.html"
            },
            {
                id: 7,
                title: "Le Voyage Nocturne (Isra et Mi'raj)",
                category: "miracles",
                period: "mecque",
                type: "evenement",
                source: "muslim",
                age: "40-53",
                importance: "majeure",
                excerpt: "Le voyage nocturne du Prophète ﷺ de La Mecque à Jérusalem (Isra) puis son ascension vers les cieux (Mi'raj) est l'un des plus grands miracles de l'Islam. Durant ce voyage, la prière fut prescrite.",
                content: "isra miraj voyage nocturne jérusalem cieux miracle prière prescrite",
                link: "fr/periode6_v2.html"
            },
            {
                id: 8,
                title: "Le Traité de Hudaybiya",
                category: "biographie",
                period: "medine",
                type: "evenement",
                source: "bukhari",
                age: "53-63",
                importance: "significative",
                excerpt: "Le traité de Hudaybiya (628 EC) fut un accord de paix entre les musulmans et la tribu de Quraysh. Bien qu'initialement perçu comme défavorable, il permit l'expansion pacifique de l'Islam.",
                content: "hudaybiya traité paix quraysh 628 expansion pacifique islam",
                link: "fr/periode11_v2.html"
            },
            {
                id: 9,
                title: "La Conquête de La Mecque",
                category: "batailles",
                period: "medine",
                type: "evenement",
                source: "tabari",
                age: "53-63",
                importance: "majeure",
                excerpt: "En 630 EC, le Prophète ﷺ conquit La Mecque de manière pacifique. Cette conquête fut marquée par la magnanimité du Prophète qui pardonna à ses anciens ennemis et purifia la Kaaba des idoles.",
                content: "conquête mecque 630 pacifique pardon ennemis kaaba idoles purification",
                link: "fr/periode12_v2.html"
            },
            {
                id: 10,
                title: "Le Pèlerinage d'Adieu",
                category: "enseignements",
                period: "medine",
                type: "evenement",
                source: "muslim",
                age: "53-63",
                importance: "majeure",
                excerpt: "Le pèlerinage d'adieu (632 EC) fut le dernier pèlerinage du Prophète ﷺ. Durant ce pèlerinage, il prononça son célèbre sermon d'adieu, résumant les principes fondamentaux de l'Islam.",
                content: "pèlerinage adieu 632 dernier sermon principes islam fondamentaux",
                link: "fr/periode14_v2.html"
            }
        ];

        let currentResults = [];
        let currentSort = 'relevance';

        function performSearch() {
            const searchTerm = document.getElementById('searchInput').value.toLowerCase().trim();
            const periodFilter = document.getElementById('periodFilter').value;
            const categoryFilter = document.getElementById('categoryFilter').value;
            const typeFilter = document.getElementById('typeFilter').value;
            const sourceFilter = document.getElementById('sourceFilter').value;
            const ageFilter = document.getElementById('ageFilter').value;
            const importanceFilter = document.getElementById('importanceFilter').value;

            if (!searchTerm && !periodFilter && !categoryFilter && !typeFilter && !sourceFilter && !ageFilter && !importanceFilter) {
                document.getElementById('resultsContainer').style.display = 'none';
                return;
            }

            // Filtrer les résultats
            let results = searchDatabase.filter(item => {
                let matches = true;

                // Recherche textuelle
                if (searchTerm) {
                    const searchableText = (item.title + ' ' + item.excerpt + ' ' + item.content).toLowerCase();
                    matches = matches && searchableText.includes(searchTerm);
                }

                // Filtres
                if (periodFilter) matches = matches && item.period === periodFilter;
                if (categoryFilter) matches = matches && item.category === categoryFilter;
                if (typeFilter) matches = matches && item.type === typeFilter;
                if (sourceFilter) matches = matches && item.source === sourceFilter;
                if (ageFilter) matches = matches && item.age === ageFilter;
                if (importanceFilter) matches = matches && item.importance === importanceFilter;

                return matches;
            });

            // Calculer la pertinence pour la recherche textuelle
            if (searchTerm) {
                results = results.map(item => {
                    const titleMatches = (item.title.toLowerCase().match(new RegExp(searchTerm, 'g')) || []).length;
                    const excerptMatches = (item.excerpt.toLowerCase().match(new RegExp(searchTerm, 'g')) || []).length;
                    const contentMatches = (item.content.toLowerCase().match(new RegExp(searchTerm, 'g')) || []).length;
                    
                    item.relevanceScore = titleMatches * 3 + excerptMatches * 2 + contentMatches;
                    return item;
                });
            }

            currentResults = results;
            sortResults();
            displayResults(searchTerm);
        }

        function sortResults() {
            const sortType = document.getElementById('sortSelect').value;
            
            switch(sortType) {
                case 'relevance':
                    currentResults.sort((a, b) => (b.relevanceScore || 0) - (a.relevanceScore || 0));
                    break;
                case 'chronological':
                    const ageOrder = ['0-10', '10-25', '25-40', '40-53', '53-63'];
                    currentResults.sort((a, b) => ageOrder.indexOf(a.age) - ageOrder.indexOf(b.age));
                    break;
                case 'alphabetical':
                    currentResults.sort((a, b) => a.title.localeCompare(b.title));
                    break;
            }
            
            displayResults(document.getElementById('searchInput').value.toLowerCase().trim());
        }

        function displayResults(searchTerm) {
            const resultsContainer = document.getElementById('resultsContainer');
            const resultsCount = document.getElementById('resultsCount');
            const resultsContent = document.getElementById('resultsContent');

            if (currentResults.length === 0) {
                resultsContainer.style.display = 'block';
                resultsCount.textContent = 'Aucun résultat trouvé';
                resultsContent.innerHTML = `
                    <div class="no-results">
                        <div class="no-results-icon">🔍</div>
                        <h3>Aucun résultat trouvé</h3>
                        <p>Essayez d'utiliser d'autres mots-clés ou ajustez vos filtres.</p>
                    </div>
                `;
                return;
            }

            resultsContainer.style.display = 'block';
            resultsCount.textContent = `${currentResults.length} résultat${currentResults.length > 1 ? 's' : ''} trouvé${currentResults.length > 1 ? 's' : ''}`;

            resultsContent.innerHTML = currentResults.map(item => {
                let highlightedTitle = item.title;
                let highlightedExcerpt = item.excerpt;

                // Surligner les termes de recherche
                if (searchTerm) {
                    const regex = new RegExp(`(${searchTerm})`, 'gi');
                    highlightedTitle = highlightedTitle.replace(regex, '<span class="result-highlight">$1</span>');
                    highlightedExcerpt = highlightedExcerpt.replace(regex, '<span class="result-highlight">$1</span>');
                }

                return `
                    <div class="result-item">
                        <div class="result-header">
                            <div>
                                <h3 class="result-title">${highlightedTitle}</h3>
                                <div class="result-period">${getPeriodLabel(item.period)} • ${getSourceLabel(item.source)}</div>
                            </div>
                            <div class="result-category">${getCategoryLabel(item.category)}</div>
                        </div>
                        <p class="result-excerpt">${highlightedExcerpt}</p>
                        <a href="${item.link}" class="result-link">Lire la suite →</a>
                    </div>
                `;
            }).join('');
        }

        function getPeriodLabel(period) {
            const periods = {
                'mecque': 'Période Mecquoise',
                'medine': 'Période Médinoise',
                'jeunesse': 'Jeunesse',
                'revelation': 'Début Révélation',
                'conquetes': 'Conquêtes'
            };
            return periods[period] || period;
        }

        function getSourceLabel(source) {
            const sources = {
                'bukhari': 'Sahih al-Bukhari',
                'muslim': 'Sahih Muslim',
                'ibn-hisham': 'Ibn Hisham',
                'tabari': 'At-Tabari'
            };
            return sources[source] || source;
        }

        function getCategoryLabel(category) {
            const categories = {
                'biographie': 'Biographie',
                'batailles': 'Batailles',
                'revelations': 'Révélations',
                'compagnons': 'Compagnons',
                'miracles': 'Miracles',
                'enseignements': 'Enseignements'
            };
            return categories[category] || category;
        }

        function toggleAdvancedFilters() {
            const advancedFilters = document.getElementById('advancedFilters');
            const toggle = document.querySelector('.advanced-toggle');
            
            if (advancedFilters.style.display === 'none' || !advancedFilters.style.display) {
                advancedFilters.style.display = 'block';
                toggle.textContent = '▲ Masquer les filtres avancés';
            } else {
                advancedFilters.style.display = 'none';
                toggle.textContent = '▼ Filtres avancés';
            }
        }

        function searchSuggestion(term) {
            document.getElementById('searchInput').value = term;
            performSearch();
        }

        // Event listeners
        document.getElementById('searchInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                performSearch();
            }
        });

        // Auto-search quand les filtres changent
        document.querySelectorAll('.filter-select').forEach(select => {
            select.addEventListener('change', performSearch);
        });
    </script>
</body>
</html>
