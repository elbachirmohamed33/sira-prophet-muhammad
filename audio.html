<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Récitations Audio - Biographie du Prophète Muhammad ﷺ</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&family=Amiri:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-gold: #D4AF37;
            --deep-green: #0F4C3A;
            --soft-cream: #F8F6F0;
            --warm-brown: #8B4513;
            --text-dark: #2C1810;
            --success-green: #27AE60;
            --light-blue: #3498DB;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, var(--soft-cream) 0%, #E8E2D4 100%);
            color: var(--text-dark);
            line-height: 1.6;
            min-height: 100vh;
        }

        .header {
            background: linear-gradient(135deg, var(--deep-green) 0%, #2E8B57 100%);
            color: white;
            padding: 3rem 0;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><circle cx="20" cy="20" r="2" fill="rgba(255,255,255,0.1)"/><circle cx="80" cy="80" r="2" fill="rgba(255,255,255,0.1)"/><circle cx="60" cy="20" r="1" fill="rgba(255,255,255,0.05)"/><circle cx="40" cy="80" r="1" fill="rgba(255,255,255,0.05)"/></svg>');
            animation: float 20s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-20px); }
        }

        .header h1 {
            font-family: 'Amiri', serif;
            font-size: 2.8rem;
            margin-bottom: 0.5rem;
            position: relative;
            z-index: 2;
        }

        .header p {
            font-size: 1.2rem;
            opacity: 0.9;
            position: relative;
            z-index: 2;
        }

        .nav {
            background: white;
            padding: 1rem 0;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            position: sticky;
            top: 0;
            z-index: 100;
            margin-bottom: 2rem;
        }

        .nav-container {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            justify-content: center;
            gap: 2rem;
            padding: 0 2rem;
        }

        .nav-link {
            color: var(--deep-green);
            text-decoration: none;
            font-weight: 600;
            padding: 0.5rem 1rem;
            border-radius: 20px;
            transition: all 0.3s ease;
        }

        .nav-link:hover {
            background: var(--primary-gold);
            color: white;
            transform: translateY(-2px);
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
        }

        .audio-hero {
            background: linear-gradient(135deg, white, var(--soft-cream));
            border-radius: 25px;
            padding: 3rem;
            text-align: center;
            margin-bottom: 3rem;
            box-shadow: 0 15px 40px rgba(0,0,0,0.1);
            border: 3px solid var(--primary-gold);
        }

        .audio-hero h2 {
            font-family: 'Amiri', serif;
            font-size: 2.5rem;
            color: var(--deep-green);
            margin-bottom: 1rem;
        }

        .audio-hero p {
            font-size: 1.2rem;
            color: var(--warm-brown);
            max-width: 600px;
            margin: 0 auto;
        }

        .audio-categories {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 2rem;
            margin-bottom: 3rem;
        }

        .category-card {
            background: white;
            border-radius: 20px;
            padding: 2rem;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            border-left: 6px solid var(--primary-gold);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .category-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 40px rgba(0,0,0,0.15);
        }

        .category-header {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1.5rem;
        }

        .category-icon {
            background: var(--primary-gold);
            color: white;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
        }

        .category-title {
            font-family: 'Amiri', serif;
            font-size: 1.5rem;
            color: var(--deep-green);
            font-weight: 600;
        }

        .audio-list {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .audio-item {
            background: var(--soft-cream);
            border-radius: 15px;
            padding: 1.5rem;
            border: 2px solid transparent;
            transition: all 0.3s ease;
        }

        .audio-item:hover {
            border-color: var(--primary-gold);
            transform: translateX(5px);
        }

        .audio-item.playing {
            border-color: var(--success-green);
            background: linear-gradient(135deg, #E8F5E8, #D4EFDF);
        }

        .audio-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 1rem;
        }

        .audio-title {
            font-weight: 600;
            color: var(--text-dark);
            font-size: 1.1rem;
        }

        .audio-duration {
            background: var(--deep-green);
            color: white;
            padding: 0.3rem 0.8rem;
            border-radius: 15px;
            font-size: 0.9rem;
        }

        .audio-description {
            color: var(--warm-brown);
            font-size: 0.95rem;
            margin-bottom: 1rem;
            line-height: 1.5;
        }

        .audio-controls {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .play-btn {
            background: var(--primary-gold);
            color: white;
            border: none;
            width: 45px;
            height: 45px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1.2rem;
        }

        .play-btn:hover {
            background: var(--deep-green);
            transform: scale(1.1);
        }

        .play-btn.playing {
            background: var(--success-green);
        }

        .progress-container {
            flex: 1;
            background: #E0E0E0;
            height: 6px;
            border-radius: 3px;
            overflow: hidden;
            cursor: pointer;
        }

        .progress-bar {
            height: 100%;
            background: linear-gradient(90deg, var(--primary-gold), var(--deep-green));
            width: 0%;
            transition: width 0.1s ease;
        }

        .time-display {
            font-size: 0.9rem;
            color: var(--warm-brown);
            font-weight: 600;
            min-width: 80px;
            text-align: right;
        }

        .global-player {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: linear-gradient(135deg, var(--deep-green), #2E8B57);
            color: white;
            padding: 1rem 2rem;
            box-shadow: 0 -5px 20px rgba(0,0,0,0.2);
            transform: translateY(100%);
            transition: transform 0.3s ease;
            z-index: 1000;
        }

        .global-player.active {
            transform: translateY(0);
        }

        .global-player-content {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            align-items: center;
            gap: 2rem;
        }

        .global-player-info {
            flex: 1;
        }

        .global-player-title {
            font-weight: 600;
            margin-bottom: 0.3rem;
        }

        .global-player-category {
            opacity: 0.8;
            font-size: 0.9rem;
        }

        .global-player-controls {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .volume-control {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .volume-slider {
            width: 80px;
            height: 4px;
            border-radius: 2px;
            background: rgba(255,255,255,0.3);
            outline: none;
            -webkit-appearance: none;
        }

        .volume-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 15px;
            height: 15px;
            border-radius: 50%;
            background: white;
            cursor: pointer;
        }

        .featured-section {
            margin-top: 3rem;
            background: linear-gradient(135deg, var(--deep-green), #2E8B57);
            color: white;
            border-radius: 25px;
            padding: 3rem;
            text-align: center;
        }

        .featured-section h3 {
            font-family: 'Amiri', serif;
            font-size: 2rem;
            margin-bottom: 1rem;
        }

        .featured-section p {
            font-size: 1.1rem;
            opacity: 0.9;
            max-width: 600px;
            margin: 0 auto 2rem;
        }

        .coming-soon {
            background: rgba(255,255,255,0.1);
            padding: 1rem 2rem;
            border-radius: 15px;
            display: inline-block;
            font-weight: 600;
        }

        @media (max-width: 768px) {
            .container {
                padding: 1rem;
            }
            
            .audio-categories {
                grid-template-columns: 1fr;
            }
            
            .nav-container {
                flex-direction: column;
                gap: 1rem;
                text-align: center;
            }
            
            .audio-hero {
                padding: 2rem;
            }
            
            .global-player-content {
                flex-direction: column;
                gap: 1rem;
            }
            
            .audio-controls {
                flex-direction: column;
                gap: 0.5rem;
            }
            
            .progress-container {
                order: -1;
            }
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>🎵 Récitations Audio</h1>
        <p>Écoutez les récits de la vie du Prophète Muhammad ﷺ</p>
    </div>

    <nav class="nav">
        <div class="nav-container">
            <a href="fr/index_v2.html" class="nav-link">🏠 Accueil</a>
            <a href="carte_interactive.html" class="nav-link">🗺️ Carte Interactive</a>
            <a href="quiz.html" class="nav-link">🧠 Quiz</a>
            <a href="galerie.html" class="nav-link">🖼️ Galerie</a>
            <a href="fr/index_v2.html" class="nav-link">🇫🇷 Français</a>
            <a href="ar/index_v2.html" class="nav-link">🇸🇦 العربية</a>
        </div>
    </nav>

    <div class="container">
        <div class="audio-hero">
            <h2>🎧 Bibliothèque Audio</h2>
            <p>Découvrez la biographie du Prophète ﷺ à travers des récitations authentiques et des narrations captivantes qui donnent vie à l'histoire islamique.</p>
        </div>

        <div class="audio-categories">
            <div class="category-card">
                <div class="category-header">
                    <div class="category-icon">🌙</div>
                    <h3 class="category-title">Naissance et Jeunesse</h3>
                </div>
                <div class="audio-list">
                    <div class="audio-item" data-audio="birth" data-title="La Naissance Bénie" data-category="Naissance et Jeunesse">
                        <div class="audio-header">
                            <div class="audio-title">La Naissance Bénie (571 EC)</div>
                            <div class="audio-duration">15:30</div>
                        </div>
                        <div class="audio-description">
                            L'histoire miraculeuse de la naissance du Prophète ﷺ dans l'Année de l'Éléphant, les signes divins et les prophéties accomplies.
                        </div>
                        <div class="audio-controls">
                            <button class="play-btn" onclick="toggleAudio('birth')">▶️</button>
                            <div class="progress-container" onclick="seekAudio(event, 'birth')">
                                <div class="progress-bar" id="progress-birth"></div>
                            </div>
                            <div class="time-display" id="time-birth">0:00 / 15:30</div>
                        </div>
                    </div>

                    <div class="audio-item" data-audio="orphan" data-title="L'Orphelin Béni" data-category="Naissance et Jeunesse">
                        <div class="audio-header">
                            <div class="audio-title">L'Orphelin Béni (571-595 EC)</div>
                            <div class="audio-duration">18:45</div>
                        </div>
                        <div class="audio-description">
                            Les années de formation sous la protection divine, la mort de ses parents et l'éducation par son grand-père Abdul-Muttalib.
                        </div>
                        <div class="audio-controls">
                            <button class="play-btn" onclick="toggleAudio('orphan')">▶️</button>
                            <div class="progress-container" onclick="seekAudio(event, 'orphan')">
                                <div class="progress-bar" id="progress-orphan"></div>
                            </div>
                            <div class="time-display" id="time-orphan">0:00 / 18:45</div>
                        </div>
                    </div>

                    <div class="audio-item" data-audio="trustworthy" data-title="Al-Amin - Le Digne de Confiance" data-category="Naissance et Jeunesse">
                        <div class="audio-header">
                            <div class="audio-title">Al-Amin - Le Digne de Confiance</div>
                            <div class="audio-duration">12:20</div>
                        </div>
                        <div class="audio-description">
                            Comment Muhammad ﷺ gagna sa réputation de Al-Amin (le Digne de Confiance) dans la société mecquoise pré-islamique.
                        </div>
                        <div class="audio-controls">
                            <button class="play-btn" onclick="toggleAudio('trustworthy')">▶️</button>
                            <div class="progress-container" onclick="seekAudio(event, 'trustworthy')">
                                <div class="progress-bar" id="progress-trustworthy"></div>
                            </div>
                            <div class="time-display" id="time-trustworthy">0:00 / 12:20</div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="category-card">
                <div class="category-header">
                    <div class="category-icon">📖</div>
                    <h3 class="category-title">Révélation et Mission</h3>
                </div>
                <div class="audio-list">
                    <div class="audio-item" data-audio="revelation" data-title="La Première Révélation" data-category="Révélation et Mission">
                        <div class="audio-header">
                            <div class="audio-title">La Première Révélation (610 EC)</div>
                            <div class="audio-duration">22:15</div>
                        </div>
                        <div class="audio-description">
                            La nuit transformatrice dans la grotte de Hira, la rencontre avec l'ange Gabriel et les premiers versets du Coran.
                        </div>
                        <div class="audio-controls">
                            <button class="play-btn" onclick="toggleAudio('revelation')">▶️</button>
                            <div class="progress-container" onclick="seekAudio(event, 'revelation')">
                                <div class="progress-bar" id="progress-revelation"></div>
                            </div>
                            <div class="time-display" id="time-revelation">0:00 / 22:15</div>
                        </div>
                    </div>

                    <div class="audio-item" data-audio="secret" data-title="La Da'wa Secrète" data-category="Révélation et Mission">
                        <div class="audio-header">
                            <div class="audio-title">La Da'wa Secrète (610-613 EC)</div>
                            <div class="audio-duration">16:30</div>
                        </div>
                        <div class="audio-description">
                            Les trois années de prédication discrète, les premiers convertis et la formation de la communauté musulmane naissante.
                        </div>
                        <div class="audio-controls">
                            <button class="play-btn" onclick="toggleAudio('secret')">▶️</button>
                            <div class="progress-container" onclick="seekAudio(event, 'secret')">
                                <div class="progress-bar" id="progress-secret"></div>
                            </div>
                            <div class="time-display" id="time-secret">0:00 / 16:30</div>
                        </div>
                    </div>

                    <div class="audio-item" data-audio="public" data-title="La Proclamation Publique" data-category="Révélation et Mission">
                        <div class="audio-header">
                            <div class="audio-title">La Proclamation Publique (613 EC)</div>
                            <div class="audio-duration">19:45</div>
                        </div>
                        <div class="audio-description">
                            Le passage de la da'wa secrète à la prédication publique, les premières oppositions et les défis.
                        </div>
                        <div class="audio-controls">
                            <button class="play-btn" onclick="toggleAudio('public')">▶️</button>
                            <div class="progress-container" onclick="seekAudio(event, 'public')">
                                <div class="progress-bar" id="progress-public"></div>
                            </div>
                            <div class="time-display" id="time-public">0:00 / 19:45</div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="category-card">
                <div class="category-header">
                    <div class="category-icon">⚔️</div>
                    <h3 class="category-title">Batailles Décisives</h3>
                </div>
                <div class="audio-list">
                    <div class="audio-item" data-audio="badr" data-title="La Bataille de Badr" data-category="Batailles Décisives">
                        <div class="audio-header">
                            <div class="audio-title">La Bataille de Badr (624 EC)</div>
                            <div class="audio-duration">25:40</div>
                        </div>
                        <div class="audio-description">
                            Le Jour du Furqan - La première grande victoire où 313 musulmans triomphèrent de 1000 guerriers avec l'aide divine.
                        </div>
                        <div class="audio-controls">
                            <button class="play-btn" onclick="toggleAudio('badr')">▶️</button>
                            <div class="progress-container" onclick="seekAudio(event, 'badr')">
                                <div class="progress-bar" id="progress-badr"></div>
                            </div>
                            <div class="time-display" id="time-badr">0:00 / 25:40</div>
                        </div>
                    </div>

                    <div class="audio-item" data-audio="uhud" data-title="La Bataille d'Uhud" data-category="Batailles Décisives">
                        <div class="audio-header">
                            <div class="audio-title">La Bataille d'Uhud (625 EC)</div>
                            <div class="audio-duration">23:20</div>
                        </div>
                        <div class="audio-description">
                            L'épreuve de la foi et de la résilience, les leçons sur l'obéissance et la martyrdom de Hamza ﷺ.
                        </div>
                        <div class="audio-controls">
                            <button class="play-btn" onclick="toggleAudio('uhud')">▶️</button>
                            <div class="progress-container" onclick="seekAudio(event, 'uhud')">
                                <div class="progress-bar" id="progress-uhud"></div>
                            </div>
                            <div class="time-display" id="time-uhud">0:00 / 23:20</div>
                        </div>
                    </div>

                    <div class="audio-item" data-audio="trench" data-title="La Bataille de la Tranchée" data-category="Batailles Décisives">
                        <div class="audio-header">
                            <div class="audio-title">La Bataille de la Tranchée (627 EC)</div>
                            <div class="audio-duration">27:15</div>
                        </div>
                        <div class="audio-description">
                            Al-Khandaq - Le grand siège où l'innovation stratégique et l'intervention divine sauvèrent Médine.
                        </div>
                        <div class="audio-controls">
                            <button class="play-btn" onclick="toggleAudio('trench')">▶️</button>
                            <div class="progress-container" onclick="seekAudio(event, 'trench')">
                                <div class="progress-bar" id="progress-trench"></div>
                            </div>
                            <div class="time-display" id="time-trench">0:00 / 27:15</div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="category-card">
                <div class="category-header">
                    <div class="category-icon">🕊️</div>
                    <h3 class="category-title">Diplomatie et Paix</h3>
                </div>
                <div class="audio-list">
                    <div class="audio-item" data-audio="hudaybiya" data-title="Le Traité de Hudaybiya" data-category="Diplomatie et Paix">
                        <div class="audio-header">
                            <div class="audio-title">Le Traité de Hudaybiya (628 EC)</div>
                            <div class="audio-duration">21:30</div>
                        </div>
                        <div class="audio-description">
                            Le chef-d'œuvre diplomatique qui ouvrit la voie à l'expansion pacifique de l'Islam en Arabie.
                        </div>
                        <div class="audio-controls">
                            <button class="play-btn" onclick="toggleAudio('hudaybiya')">▶️</button>
                            <div class="progress-container" onclick="seekAudio(event, 'hudaybiya')">
                                <div class="progress-bar" id="progress-hudaybiya"></div>
                            </div>
                            <div class="time-display" id="time-hudaybiya">0:00 / 21:30</div>
                        </div>
                    </div>

                    <div class="audio-item" data-audio="mecca" data-title="La Conquête de La Mecque" data-category="Diplomatie et Paix">
                        <div class="audio-header">
                            <div class="audio-title">La Conquête de La Mecque (630 EC)</div>
                            <div class="audio-duration">24:50</div>
                        </div>
                        <div class="audio-description">
                            La victoire pacifique qui accomplit la vision prophétique et transforma l'Arabie pour toujours.
                        </div>
                        <div class="audio-controls">
                            <button class="play-btn" onclick="toggleAudio('mecca')">▶️</button>
                            <div class="progress-container" onclick="seekAudio(event, 'mecca')">
                                <div class="progress-bar" id="progress-mecca"></div>
                            </div>
                            <div class="time-display" id="time-mecca">0:00 / 24:50</div>
                        </div>
                    </div>

                    <div class="audio-item" data-audio="farewell" data-title="Le Pèlerinage d'Adieu" data-category="Diplomatie et Paix">
                        <div class="audio-header">
                            <div class="audio-title">Le Pèlerinage d'Adieu (632 EC)</div>
                            <div class="audio-duration">18:25</div>
                        </div>
                        <div class="audio-description">
                            Le dernier Hajj du Prophète ﷺ et son sermon historique sur l'égalité et la fraternité universelle.
                        </div>
                        <div class="audio-controls">
                            <button class="play-btn" onclick="toggleAudio('farewell')">▶️</button>
                            <div class="progress-container" onclick="seekAudio(event, 'farewell')">
                                <div class="progress-bar" id="progress-farewell"></div>
                            </div>
                            <div class="time-display" id="time-farewell">0:00 / 18:25</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="featured-section">
            <h3>🎙️ Fonctionnalités Prochaines</h3>
            <p>Nous travaillons sur des récitations complètes avec des récitateurs renommés, des podcasts éducatifs et des versions multilingues pour enrichir votre expérience d'apprentissage.</p>
            <div class="coming-soon">🚀 Bientôt Disponible</div>
        </div>
    </div>

    <!-- Global Audio Player -->
    <div class="global-player" id="globalPlayer">
        <div class="global-player-content">
            <div class="global-player-info">
                <div class="global-player-title" id="playerTitle">Titre du récit</div>
                <div class="global-player-category" id="playerCategory">Catégorie</div>
            </div>
            <div class="global-player-controls">
                <button class="play-btn" id="globalPlayBtn" onclick="toggleGlobalAudio()">▶️</button>
                <div class="progress-container" style="width: 200px;" onclick="seekGlobalAudio(event)">
                    <div class="progress-bar" id="globalProgress"></div>
                </div>
                <div class="time-display" id="globalTime">0:00 / 0:00</div>
                <div class="volume-control">
                    <span>🔊</span>
                    <input type="range" class="volume-slider" id="volumeSlider" min="0" max="100" value="70" onchange="changeVolume()">
                </div>
            </div>
        </div>
    </div>

    <script>
        // Audio management system
        let currentAudio = null;
        let currentAudioId = null;
        let isPlaying = false;

        // Simulated audio durations (in seconds)
        const audioDurations = {
            'birth': 930,      // 15:30
            'orphan': 1125,    // 18:45
            'trustworthy': 740, // 12:20
            'revelation': 1335, // 22:15
            'secret': 990,     // 16:30
            'public': 1185,    // 19:45
            'badr': 1540,      // 25:40
            'uhud': 1400,      // 23:20
            'trench': 1635,    // 27:15
            'hudaybiya': 1290, // 21:30
            'mecca': 1490,     // 24:50
            'farewell': 1105   // 18:25
        };

        let currentTime = 0;
        let duration = 0;
        let progressInterval = null;

        function toggleAudio(audioId) {
            const audioItem = document.querySelector(`[data-audio="${audioId}"]`);
            const playBtn = audioItem.querySelector('.play-btn');
            const title = audioItem.getAttribute('data-title');
            const category = audioItem.getAttribute('data-category');

            // Stop current audio if different
            if (currentAudioId && currentAudioId !== audioId) {
                stopAudio(currentAudioId);
            }

            if (currentAudioId === audioId && isPlaying) {
                // Pause current audio
                pauseAudio(audioId);
            } else {
                // Play audio
                playAudio(audioId, title, category);
            }
        }

        function playAudio(audioId, title, category) {
            currentAudioId = audioId;
            isPlaying = true;
            duration = audioDurations[audioId];
            
            // Update UI
            const audioItem = document.querySelector(`[data-audio="${audioId}"]`);
            const playBtn = audioItem.querySelector('.play-btn');
            
            playBtn.textContent = '⏸️';
            playBtn.classList.add('playing');
            audioItem.classList.add('playing');

            // Show global player
            const globalPlayer = document.getElementById('globalPlayer');
            globalPlayer.classList.add('active');
            
            document.getElementById('playerTitle').textContent = title;
            document.getElementById('playerCategory').textContent = category;
            document.getElementById('globalPlayBtn').textContent = '⏸️';

            // Start progress simulation
            startProgress(audioId);
        }

        function pauseAudio(audioId) {
            isPlaying = false;
            
            // Update UI
            const audioItem = document.querySelector(`[data-audio="${audioId}"]`);
            const playBtn = audioItem.querySelector('.play-btn');
            
            playBtn.textContent = '▶️';
            playBtn.classList.remove('playing');
            audioItem.classList.remove('playing');
            
            document.getElementById('globalPlayBtn').textContent = '▶️';

            // Stop progress
            if (progressInterval) {
                clearInterval(progressInterval);
            }
        }

        function stopAudio(audioId) {
            isPlaying = false;
            currentTime = 0;
            
            // Update UI
            const audioItem = document.querySelector(`[data-audio="${audioId}"]`);
            const playBtn = audioItem.querySelector('.play-btn');
            
            playBtn.textContent = '▶️';
            playBtn.classList.remove('playing');
            audioItem.classList.remove('playing');

            // Reset progress
            updateProgress(audioId, 0);
            updateTimeDisplay(audioId, 0, audioDurations[audioId]);

            // Stop progress
            if (progressInterval) {
                clearInterval(progressInterval);
            }
        }

        function startProgress(audioId) {
            if (progressInterval) {
                clearInterval(progressInterval);
            }

            progressInterval = setInterval(() => {
                if (isPlaying && currentTime < duration) {
                    currentTime += 1;
                    updateProgress(audioId, (currentTime / duration) * 100);
                    updateTimeDisplay(audioId, currentTime, duration);
                    updateGlobalProgress();
                } else if (currentTime >= duration) {
                    // Audio finished
                    stopAudio(audioId);
                    currentAudioId = null;
                    hideGlobalPlayer();
                }
            }, 1000);
        }

        function updateProgress(audioId, percentage) {
            const progressBar = document.getElementById(`progress-${audioId}`);
            if (progressBar) {
                progressBar.style.width = percentage + '%';
            }
        }

        function updateTimeDisplay(audioId, current, total) {
            const timeDisplay = document.getElementById(`time-${audioId}`);
            if (timeDisplay) {
                timeDisplay.textContent = `${formatTime(current)} / ${formatTime(total)}`;
            }
        }

        function updateGlobalProgress() {
            const globalProgress = document.getElementById('globalProgress');
            const globalTime = document.getElementById('globalTime');
            
            if (globalProgress && currentAudioId) {
                const percentage = (currentTime / duration) * 100;
                globalProgress.style.width = percentage + '%';
                globalTime.textContent = `${formatTime(currentTime)} / ${formatTime(duration)}`;
            }
        }

        function formatTime(seconds) {
            const minutes = Math.floor(seconds / 60);
            const secs = seconds % 60;
            return `${minutes}:${secs.toString().padStart(2, '0')}`;
        }

        function seekAudio(event, audioId) {
            if (!isPlaying || currentAudioId !== audioId) return;

            const rect = event.currentTarget.getBoundingClientRect();
            const clickX = event.clientX - rect.left;
            const percentage = clickX / rect.width;
            
            currentTime = Math.floor(percentage * duration);
            updateProgress(audioId, percentage * 100);
            updateTimeDisplay(audioId, currentTime, duration);
            updateGlobalProgress();
        }

        function seekGlobalAudio(event) {
            if (!isPlaying || !currentAudioId) return;

            const rect = event.currentTarget.getBoundingClientRect();
            const clickX = event.clientX - rect.left;
            const percentage = clickX / rect.width;
            
            currentTime = Math.floor(percentage * duration);
            updateProgress(currentAudioId, percentage * 100);
            updateTimeDisplay(currentAudioId, currentTime, duration);
            updateGlobalProgress();
        }

        function toggleGlobalAudio() {
            if (currentAudioId) {
                toggleAudio(currentAudioId);
            }
        }

        function hideGlobalPlayer() {
            const globalPlayer = document.getElementById('globalPlayer');
            globalPlayer.classList.remove('active');
        }

        function changeVolume() {
            const volume = document.getElementById('volumeSlider').value;
            // In a real implementation, this would control actual audio volume
            console.log('Volume set to:', volume);
        }

        // Keyboard shortcuts
        document.addEventListener('keydown', (e) => {
            if (currentAudioId) {
                switch(e.code) {
                    case 'Space':
                        e.preventDefault();
                        toggleAudio(currentAudioId);
                        break;
                    case 'Escape':
                        if (currentAudioId) {
                            stopAudio(currentAudioId);
                            currentAudioId = null;
                            hideGlobalPlayer();
                        }
                        break;
                }
            }
        });

        // Initialize
        console.log('🎵 Audio System Initialized');
        console.log('📱 Use SPACE to play/pause, ESC to stop');
    </script>
</body>
</html>
